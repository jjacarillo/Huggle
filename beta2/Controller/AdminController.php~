<?php
App::uses('AppController', 'Controller');
/**
 * Admin Controller
 *
 * @property Admin $Admin
 */
class AdminController extends AppController {

	public $uses = array('User', 'Campaign');

	public function dashboard() {
		$options['joins'] = array(    
			array(
				'table' => 'coupon_types',        
				'alias' => 'CouponTypes',        
				'type' => 'LEFT',        
				'conditions' => array(            
					'CouponTypes.id = coupon_type_id',        
					)   
			),
			array(
				'table' => 'coupon_infos',        
				'alias' => 'CouponInfos',        
				'type' => 'LEFT',        
				'conditions' => array(            
					'CouponInfos.id = coupon_info_id',        
					)   
			),		
		);
		
		$options['limit'] = '5';
		$options['order'] = 'CouponInfos.rank ASC, CouponTypes.name ASC';

		$this->set('featuredPromos',$this->Campaign->find('all',$options));
	}

}
